<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fagus &mdash; Fagus 1.1.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/wider_page.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->

        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="fagus package" href="fagus.html" />
    <link rel="prev" title="ISC License" href="LICENSE.html" />
</head>

<body class="wy-body-for-nav">
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >



          <a href="index.html" class="icon icon-home">
            Fagus
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="LICENSE.html">ISC License</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">README</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#code-and-tests-ready-documentation-still-work-in-progress">Code and tests ready, documentation still WORK IN PROGRESS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#basic-principles">Basic principles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction-what-it-solves">Introduction – What it solves</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-path-parameter">The path-parameter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#static-and-instance-usage">Static and instance usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fagus-options">Fagus options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#default">default</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default-node-type">default_node_type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#if">if_</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iter-fill">iter_fill</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iter-nodes">iter_nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#list-insert">list_insert</a></li>
<li class="toctree-l4"><a class="reference internal" href="#node-types">node_types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#path-split">path_split</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#modifying-the-tree">Modifying the tree</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basic-principles-for-modifying-the-tree">Basic principles for modifying the tree</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#correctly-handling-list-indices">Correctly handling list indices</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-the-correct-type-of-node">Create the correct type of node</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ensure-that-the-required-node-can-be-modified">Ensure that the required node can be modified</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#set-adding-and-overwriting-elements">set() – adding and overwriting elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#append-adding-a-new-element-to-a-list">append() – adding a new element to a <code class="docutils literal notranslate"><span class="pre">list</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#extend-extending-a-list-with-multiple-elements">extend() – extending a <code class="docutils literal notranslate"><span class="pre">list</span></code> with multiple elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#insert-insert-an-element-at-a-given-index-in-a-list">insert() – insert an element at a given index in a <code class="docutils literal notranslate"><span class="pre">list</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-adding-a-new-element-to-a-set">add() – adding a new element to a <code class="docutils literal notranslate"><span class="pre">set</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-update-multiple-elements-in-a-set-or-dict">update() – update multiple elements in a <code class="docutils literal notranslate"><span class="pre">set</span></code> or <code class="docutils literal notranslate"><span class="pre">dict</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#remove-delete-and-pop">remove(), delete() and pop()</a></li>
<li class="toctree-l3"><a class="reference internal" href="#serialize-ensure-that-a-tree-is-json-or-yaml-serializable">serialize() – ensure that a tree is json- or yaml-serializable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mod-modifying-elements">mod() – modifying elements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#iterating-over-nested-objects">Iterating over nested objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#skipping-nodes-in-iteration">Skipping nodes in iteration.</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#filtering-nested-objects">Filtering nested objects</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fagus.html">fagus package</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html">Contributing to Fagus</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Fagus</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Fagus</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/README.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">

  <section id="fagus">
<h1>Fagus<a class="headerlink" href="#fagus" title="Permalink to this heading"></a></h1>
<p>These days most data is converted to and from <code class="docutils literal notranslate"><span class="pre">json</span></code> and <code class="docutils literal notranslate"><span class="pre">yaml</span></code> while it is sent back and forth to and from API’s. Often this data is deeply nested. <code class="docutils literal notranslate"><span class="pre">Fagus</span></code> is a Python-library that makes it easier to work with nested dicts and lists. It allows you to traverse and edit these tree-objects with simple function calls that handle the most common errors and exceptions internally. The name fagus is actually the latin name for the genus of beech-trees.</p>
<section id="code-and-tests-ready-documentation-still-work-in-progress">
<h2>Code and tests ready, documentation still WORK IN PROGRESS<a class="headerlink" href="#code-and-tests-ready-documentation-still-work-in-progress" title="Permalink to this heading"></a></h2>
<p>This documentation is still Work in Progress. I have some more ideas for features, but most of the coding is done. The code is tested as good as possible, but of course there still might be bugs as this library has just been released. Just report them so we get them away ;). Even though this README is not done yet, you should be able to use most of the functions based on the docstrings and some trial and error. Just ask questions <a class="reference external" href="https://github.com/treeorg/Fagus/discussions/categories/q-a">here</a> if sth is unclear. The documentation will be filled in and completed as soon as possible.</p>
<p><strong>HAVE FUN!</strong></p>
<p><font size=5><strong>Table of contents</strong></font></p>
<!--TOC-->
<ul class="simple">
<li><p><a class="reference external" href="#basic-principles">Basic principles</a></p>
<ul>
<li><p><a class="reference external" href="#introduction----what-it-solves">Introduction – What it solves</a></p></li>
<li><p><a class="reference external" href="#the-path-parameter">The path-parameter</a></p></li>
<li><p><a class="reference external" href="#static-and-instance-usage">Static and instance usage</a></p></li>
<li><p><a class="reference external" href="#fagus-options">Fagus options</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#modifying-the-tree">Modifying the tree</a></p>
<ul>
<li><p><a class="reference external" href="#basic-principles-for-modifying-the-tree">Basic principles for modifying the tree</a></p></li>
<li><p><a class="reference external" href="#set----adding-and-overwriting-elements">set() – adding and overwriting elements</a></p></li>
<li><p><a class="reference external" href="#append----adding-a-new-element-to-a-list">append() – adding a new element to a <code class="docutils literal notranslate"><span class="pre">list</span></code></a></p></li>
<li><p><a class="reference external" href="#extend----extending-a-list-with-multiple-elements">extend() – extending a <code class="docutils literal notranslate"><span class="pre">list</span></code> with multiple elements</a></p></li>
<li><p><a class="reference external" href="#insert----insert-an-element-at-a-given-index-in-a-list">insert() – insert an element at a given index in a <code class="docutils literal notranslate"><span class="pre">list</span></code></a></p></li>
<li><p><a class="reference external" href="#add----adding-a-new-element-to-a-set">add() – adding a new element to a <code class="docutils literal notranslate"><span class="pre">set</span></code></a></p></li>
<li><p><a class="reference external" href="#update----update-multiple-elements-in-a-set-or-dict">update() – update multiple elements in a <code class="docutils literal notranslate"><span class="pre">set</span></code> or <code class="docutils literal notranslate"><span class="pre">dict</span></code></a></p></li>
<li><p><a class="reference external" href="#remove-delete-and-pop">remove(), delete() and pop()</a></p></li>
<li><p><a class="reference external" href="#serialize----ensure-that-a-tree-is-json--or-yaml-serializable">serialize() – ensure that a tree is json- or yaml-serializable</a></p></li>
<li><p><a class="reference external" href="#mod----modifying-elements">mod() – modifying elements</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#iterating-over-nested-objects">Iterating over nested objects</a></p>
<ul>
<li><p><a class="reference external" href="#skipping-nodes-in-iteration">Skipping nodes in iteration.</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#filtering-nested-objects">Filtering nested objects</a></p></li>
</ul>
<!--TOC-->
</section>
<section id="basic-principles">
<h2>Basic principles<a class="headerlink" href="#basic-principles" title="Permalink to this heading"></a></h2>
<section id="introduction-what-it-solves">
<h3>Introduction – What it solves<a class="headerlink" href="#introduction-what-it-solves" title="Permalink to this heading"></a></h3>
<p>Imagine you want to fetch values from a nested dict as shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a1&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;b1&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;c1&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="s2">&quot;b2&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span> <span class="s2">&quot;a2&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;d1&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">}}</span>
<span class="linenos">2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;a1&quot;</span><span class="p">][</span><span class="s2">&quot;b1&quot;</span><span class="p">][</span><span class="s2">&quot;c1&quot;</span><span class="p">]</span>  <span class="c1"># prints 2, so far so good</span>
<span class="linenos">3</span><span class="go">2</span>
<span class="linenos">4</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;a1&quot;</span><span class="p">][</span><span class="s2">&quot;b3&quot;</span><span class="p">][</span><span class="s2">&quot;c2&quot;</span><span class="p">]</span>  <span class="c1"># fails, because b3 doesn&#39;t exist</span>
<span class="linenos">5</span><span class="gt">Traceback (most recent call last):</span>
<span class="linenos">6</span><span class="w"> </span><span class="c">...</span>
<span class="linenos">7</span><span class="gr">KeyError</span>: <span class="n">&#39;b3&#39;</span>
</pre></div>
</div>
<p>The problem is that the consecutive square brackets fail if one of the nodes doesn’t exist. There are ways around, like writing <code class="docutils literal notranslate"><span class="pre">a.get(&quot;a1&quot;,</span> <span class="pre">{}).get(&quot;b3&quot;,</span> <span class="pre">{}).get(&quot;c2&quot;)</span></code> or surrounding each of these statements with <code class="docutils literal notranslate"><span class="pre">try-except</span></code>, but both are hard to maintain and verbose. Below you can see how <code class="docutils literal notranslate"><span class="pre">Fagus</span></code> can help to resolve this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">fagus</span> <span class="kn">import</span> <span class="n">Fagus</span>
<span class="linenos">2</span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Fagus</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;a1&quot;</span><span class="p">,</span> <span class="s2">&quot;b3&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">)))</span>  <span class="c1"># None, as this key doesn&#39;t exist in a</span>
<span class="linenos">3</span><span class="go">None</span>
</pre></div>
</div>
<p>As you can see, now only one function call is needed to fetch the value from <code class="docutils literal notranslate"><span class="pre">a</span></code>. If one of the keys doesn’t exist, a default value is returned. In this case no default value was specified, so <code class="docutils literal notranslate"><span class="pre">None</span></code> is returned.</p>
<p>The whole <code class="docutils literal notranslate"><span class="pre">Fagus</span></code> library is built around these principles. It provides:</p>
<ul class="simple">
<li><p><strong>Simple functions</strong>: replacing tedious code that is hard to maintain and error prone</p></li>
<li><p><strong>Few exceptions</strong>: Rather than raising a lot of exceptions, <code class="docutils literal notranslate"><span class="pre">Fagus</span></code> does what is most likely the programmer’s intention.</p></li>
</ul>
</section>
<section id="the-path-parameter">
<h3>The path-parameter<a class="headerlink" href="#the-path-parameter" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Fagus</span></code> is built around the concept of a Mapping or dict, where there are keys that are used to refer to values. For lists, the indices are used as keys. In opposition to a simple dict, in <code class="docutils literal notranslate"><span class="pre">Fagus</span></code> the key can consist of multiple values – one for each layer.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="p">{</span><span class="mi">6</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s2">&quot;v1&quot;</span><span class="p">}]},</span> <span class="p">[</span><span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;fg&quot;</span><span class="p">:</span> <span class="s2">&quot;v2&quot;</span><span class="p">}]]</span>
<span class="linenos">2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">Fagus</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">))</span>
<span class="linenos">3</span><span class="go">&#39;v1&#39;</span>
<span class="linenos">4</span><span class="gp">&gt;&gt;&gt; </span><span class="n">Fagus</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s2">&quot;2 -1 fg&quot;</span><span class="p">)</span>
<span class="linenos">5</span><span class="go">&#39;v2&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Line 3</strong>: The path-parameter is the tuple in the second argument of the get-function. The first and third element in that tuple are list-indices, whereas the second and fourth element are dict-keys.</p></li>
<li><p><strong>Line 5</strong>: In many cases, the dict-keys that are traversed are strings. For convenience, it’s also possible to provide the whole path-parameter as one string that is split up into the different keys. In the example above, <code class="docutils literal notranslate"><span class="pre">&quot;</span> <span class="pre">&quot;</span></code> is used to split the path-string, this can be customized using the <a class="reference external" href="#path_split"><code class="docutils literal notranslate"><span class="pre">path_split</span></code></a> <a class="reference external" href="#fagus-options"><code class="docutils literal notranslate"><span class="pre">FagusOption</span></code></a>.</p></li>
</ul>
</section>
<section id="static-and-instance-usage">
<h3>Static and instance usage<a class="headerlink" href="#static-and-instance-usage" title="Permalink to this heading"></a></h3>
<p>All functions in <code class="docutils literal notranslate"><span class="pre">Fagus</span></code> can be used statically, or on a <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>-instance, so the following two calls of <a class="reference external" href="#the-path-parameter"><code class="docutils literal notranslate"><span class="pre">get()</span></code></a> give the same result:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="p">{</span><span class="mi">6</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s2">&quot;v1&quot;</span><span class="p">}]},</span> <span class="p">[</span><span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;fg&quot;</span><span class="p">:</span> <span class="s2">&quot;v2&quot;</span><span class="p">}]]</span>
<span class="linenos">2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">Fagus</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s2">&quot;2 0&quot;</span><span class="p">)</span>
<span class="linenos">3</span><span class="go">&#39;e&#39;</span>
<span class="linenos">4</span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="linenos">5</span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;2 0&quot;</span><span class="p">)</span>
<span class="linenos">6</span><span class="go">&#39;e&#39;</span>
</pre></div>
</div>
<p>The first call of <a class="reference external" href="#the-path-parameter"><code class="docutils literal notranslate"><span class="pre">get()</span></code></a> in line 3 is static, as we have seen before. No <code class="docutils literal notranslate"><span class="pre">Fagus</span></code> instance is required, the object <code class="docutils literal notranslate"><span class="pre">a</span></code> is just passed as the first parameter. In line 5, <code class="docutils literal notranslate"><span class="pre">b</span></code> is created as a <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>-instance – calling <a class="reference external" href="#the-path-parameter"><code class="docutils literal notranslate"><span class="pre">get()</span></code></a> on <code class="docutils literal notranslate"><span class="pre">b</span></code> also yields <code class="docutils literal notranslate"><span class="pre">e</span></code>.</p>
<p>While it’s not necessary to instantiate <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>, there are some neat shortcuts that are only available to <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>-instances:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">()</span>
<span class="linenos">2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;x y z&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6</span>  <span class="c1"># a = {&quot;x&quot;: {&quot;y&quot;: {&quot;z&quot;: 6}}}</span>
<span class="linenos">3</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">x</span>  <span class="c1"># returns the whole subnode at a[&quot;x&quot;]</span>
<span class="linenos">4</span><span class="go">{&#39;y&#39;: {&#39;z&#39;: 6}}</span>
<span class="linenos">5</span><span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">a</span><span class="p">[(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">)]</span>  <span class="c1"># Delete the z-subnode in a[&quot;x y z&quot;]</span>
<span class="linenos">6</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">()</span>
<span class="linenos">7</span><span class="go">{&#39;x&#39;: {&#39;y&#39;: {}}}</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Square bracket notation</strong>: On <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>-instances, the square-bracket notation can be used for easier access of data if no further customization is needed. Line 3 is equivalent to <code class="docutils literal notranslate"><span class="pre">a.set(6,</span> <span class="pre">&quot;x</span> <span class="pre">y</span> <span class="pre">z&quot;)</span></code>. It can be used for getting, setting and deleting items (line 6).</p></li>
<li><p><strong>Dot notation</strong>: The dot-notation is activated for setting, getting and deleting items as well (line 4). It can be used to access <code class="docutils literal notranslate"><span class="pre">str</span></code>-keys in <code class="docutils literal notranslate"><span class="pre">dict</span></code>s and <code class="docutils literal notranslate"><span class="pre">list</span></code>-indices, the index must then be preceded with an underscore due to Python naming limitations (<code class="docutils literal notranslate"><span class="pre">a._4</span></code>). This can be further customized using the <a class="reference external" href="#path_split"><code class="docutils literal notranslate"><span class="pre">path_split</span></code></a> <a class="reference external" href="#fagus-options"><code class="docutils literal notranslate"><span class="pre">FagusOption</span></code></a>.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">Fagus</span></code> is a wrapper-class around a tree of <code class="docutils literal notranslate"><span class="pre">dict</span></code>- or <code class="docutils literal notranslate"><span class="pre">list</span></code>-nodes. To get back the root-object inside the instance, use <code class="docutils literal notranslate"><span class="pre">()</span></code> to call the object – this is shown in line 7. Alternatively you can get the root-object through <code class="docutils literal notranslate"><span class="pre">.root</span></code>.</p>
</section>
<section id="fagus-options">
<h3>Fagus options<a class="headerlink" href="#fagus-options" title="Permalink to this heading"></a></h3>
<p>There are several parameters used across many functions in <code class="docutils literal notranslate"><span class="pre">Fagus</span></code> steering the behaviour of that function. Often, similar behaviour is intended across a whole application or parts of it, and this is where options come in handy allowing to only specify these parameters once instead of each time a function is called.</p>
<p>One example of a <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>-option is <a class="reference external" href="#default"><code class="docutils literal notranslate"><span class="pre">default</span></code></a>. This option contains the value that is returned e.g. in <a class="reference external" href="#the-path-parameter"><code class="docutils literal notranslate"><span class="pre">get()</span></code></a> if a <a class="reference external" href="#the-path-parameter"><code class="docutils literal notranslate"><span class="pre">path</span></code></a> doesn’t exist, see <a class="reference external" href="#introduction----what-it-solves">Introduction</a>, code block two for an example of <a class="reference external" href="#default"><code class="docutils literal notranslate"><span class="pre">default</span></code></a>.</p>
<p>There are four levels at which an option can be set, where the higher levels take precedence over the lower levels:</p>
<p><strong>The four levels of <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>-options</strong>:</p>
<ol class="arabic simple">
<li><p><strong>Default</strong>: If no other level is specified, the hardcoded default for that option is used.</p></li>
<li><p><strong>Class</strong>: If an option is set at class level (i.e. <code class="docutils literal notranslate"><span class="pre">Fagus.option</span></code>), it applies to all function calls and all instances where level one and two of that option aren’t defined. Options at this level apply for the whole file <code class="docutils literal notranslate"><span class="pre">Fagus</span></code> has been imported in.</p></li>
<li><p><strong>Instance</strong>: If an option is set for an instance, it will apply to all function calls at that instance where the option wasn’t overriden by an argument.</p></li>
<li><p><strong>Argument</strong>: The highest level - if an option is specified directly as an argument to a function, that value takes precedence over all other levels.</p></li>
</ol>
<p>Below is an example of how the different levels take precedence over one another:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="linenos"> 2</span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">))</span>  <span class="c1"># b does not exist in a - default is None by default</span>
<span class="linenos"> 3</span><span class="go">None</span>
<span class="linenos"> 4</span><span class="gp">&gt;&gt;&gt; </span><span class="n">Fagus</span><span class="o">.</span><span class="n">default</span> <span class="o">=</span> <span class="s2">&quot;class&quot;</span>  <span class="c1"># Overriding default at class level (level 2)</span>
<span class="linenos"> 5</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">)</span>  <span class="c1"># now &#39;class&#39; is returned, as None was overridden</span>
<span class="linenos"> 6</span><span class="go">&#39;class&#39;</span>
<span class="linenos"> 7</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">default</span> <span class="o">=</span> <span class="s1">&#39;instance&#39;</span>  <span class="c1"># setting the default option at instance level (level 3)</span>
<span class="linenos"> 8</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">)</span>  <span class="c1"># for a default is set to &#39;instance&#39; -- return &#39;instance&#39;</span>
<span class="linenos"> 9</span><span class="go">&#39;instance&#39;</span>
<span class="linenos">10</span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="linenos">11</span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">)</span>  <span class="c1"># for b, line 7 doesn&#39;t apply -- line 5 still applies</span>
<span class="linenos">12</span><span class="go">&#39;class&#39;</span>
<span class="linenos">13</span><span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">Fagus</span><span class="o">.</span><span class="n">default</span>  <span class="c1"># deleting an option resets it to its default</span>
<span class="linenos">14</span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">))</span>  <span class="c1"># for default, the default is None</span>
<span class="linenos">15</span><span class="go">None</span>
<span class="linenos">16</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;arg&#39;</span><span class="p">)</span>  <span class="c1"># passing an option as a parameter always wins</span>
<span class="linenos">17</span><span class="go">&#39;arg&#39;</span>
</pre></div>
</div>
<p>All <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>-options at level three can be set in the constructor of <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>, so they don’t have to be set one by one like in line 8. You can also use <code class="docutils literal notranslate"><span class="pre">options()</span></code> on an instance or on the <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>-class to set several options in one line, or get all the options that apply to an instance.</p>
<p>Some <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>-functions return child-<code class="docutils literal notranslate"><span class="pre">Fagus</span></code>-objects in their result. These child-objects inherit the options at level three from their parent.</p>
<p>The remaining part of this section explains the <code class="docutils literal notranslate"><span class="pre">FagusOption</span></code>s one by one.</p>
<section id="default">
<h4>default<a class="headerlink" href="#default" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
<li><p><strong>Type</strong>: <code class="docutils literal notranslate"><span class="pre">Any</span></code></p></li>
</ul>
<p>This value is returned if the requested <a class="reference external" href="#the-path-parameter"><code class="docutils literal notranslate"><span class="pre">path</span></code></a> does not exist, for example in <a class="reference external" href="#the-path-parameter"><code class="docutils literal notranslate"><span class="pre">get()</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">fagus</span> <span class="kn">import</span> <span class="n">Fagus</span>
<span class="linenos">2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="linenos">3</span><span class="gp">&gt;&gt;&gt; </span><span class="n">Fagus</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>  <span class="c1"># return 3, as &quot;b&quot; exists</span>
<span class="linenos">4</span><span class="go">3</span>
<span class="linenos">5</span><span class="gp">&gt;&gt;&gt; </span><span class="n">Fagus</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s2">&quot;q&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>  <span class="c1"># return default 8, as &quot;q&quot; does not exist</span>
<span class="linenos">6</span><span class="go">8</span>
<span class="linenos">7</span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Fagus</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s2">&quot;q&quot;</span><span class="p">))</span>  <span class="c1"># &quot;q&quot; does not exist -- return None being default if it hasn&#39;t been specified as arg</span>
<span class="linenos">8</span><span class="go">None</span>
</pre></div>
</div>
</section>
<section id="default-node-type">
<h4>default_node_type<a class="headerlink" href="#default-node-type" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">&quot;d&quot;</span></code></p></li>
<li><p><strong>Type</strong>: <code class="docutils literal notranslate"><span class="pre">str</span></code></p></li>
<li><p><strong>Allowed values</strong>: <code class="docutils literal notranslate"><span class="pre">&quot;d&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;l&quot;</span></code></p></li>
</ul>
<p>Can be either <code class="docutils literal notranslate"><span class="pre">&quot;d&quot;</span></code> for <code class="docutils literal notranslate"><span class="pre">dict</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;l&quot;</span></code> for <code class="docutils literal notranslate"><span class="pre">list</span></code>. A new node of this type is created if it’s not specified clearly what other type that node shall have. It is used e.g. when Fagus is instanciated with an empty constructor:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">Fagus</span><span class="o">.</span><span class="n">default_node_type</span> <span class="o">=</span> <span class="s2">&quot;l&quot;</span>
<span class="linenos"> 2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">()</span>
<span class="linenos"> 3</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">()</span>  <span class="c1"># the root node of a is an empty list as this was set in line 2</span>
<span class="linenos"> 4</span><span class="go">[]</span>
<span class="linenos"> 5</span><span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">Fagus</span><span class="o">.</span><span class="n">default_node_type</span>
<span class="linenos"> 6</span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">()</span>
<span class="linenos"> 7</span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">()</span>  <span class="c1"># the root node of b is a dict (default for default_node_type)</span>
<span class="linenos"> 8</span><span class="go">{}</span>
<span class="linenos"> 9</span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">([])</span>
<span class="linenos">10</span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="p">()</span>  <span class="c1"># the root node of c is now also a list</span>
<span class="linenos">11</span><span class="go">[]</span>
</pre></div>
</div>
<p>More information about how <code class="docutils literal notranslate"><span class="pre">default_node_type</span></code> is used when new nodes need to be generated can be found in <a class="reference external" href="#basic-principles-for-modifying-the-tree">Basic principles for modifying the tree</a> and the documentation of the <code class="docutils literal notranslate"><span class="pre">FagusOption</span></code> <a class="reference external" href="#node_types"><code class="docutils literal notranslate"><span class="pre">node_types</span></code></a>.</p>
</section>
<section id="if">
<h4>if_<a class="headerlink" href="#if" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">_None</span></code>, meaning that the value is not checked</p></li>
<li><p><strong>Type</strong>: Any</p></li>
</ul>
<p>This option can be used to verify values before they’re inserted into the <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>-object. Generating configuration-files, default values can often be omitted whereas special settings shall be included, <code class="docutils literal notranslate"><span class="pre">if_</span></code> can be used to do this without an extra if-statement.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">(</span><span class="n">if_</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># the only allowed value for set is now True</span>
<span class="linenos"> 2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">v1</span> <span class="o">=</span> <span class="kc">True</span>
<span class="linenos"> 3</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">()</span>  <span class="c1"># v1 was set, because it was True (as requested in line 1)</span>
<span class="linenos"> 4</span><span class="go">{&#39;v1&#39;: True}</span>
<span class="linenos"> 5</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">v2</span> <span class="o">=</span> <span class="kc">None</span>
<span class="linenos"> 6</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">()</span>  <span class="c1"># note that v2 has not been set as it was not True</span>
<span class="linenos"> 7</span><span class="go">{&#39;v1&#39;: True}</span>
<span class="linenos"> 8</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s2">&quot;v2&quot;</span><span class="p">,</span> <span class="n">if_</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>  <span class="c1"># 6 was set as it was in (4, 5, 6)</span>
<span class="linenos"> 9</span><span class="go">{&#39;v1&#39;: True, &#39;v2&#39;: 6}</span>
<span class="linenos">10</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;v3&quot;</span><span class="p">,</span> <span class="n">if_</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>  <span class="c1"># v3 is not set because bool(&quot;&quot;) is False</span>
<span class="linenos">11</span><span class="go">{&#39;v1&#39;: True, &#39;v2&#39;: 6}</span>
</pre></div>
</div>
<p>Possible ways to specify <code class="docutils literal notranslate"><span class="pre">if_</span></code>:</p>
<ul class="simple">
<li><p><strong>Single value</strong>: This is shown in line 1 – the only values that can now be set is <code class="docutils literal notranslate"><span class="pre">True</span></code>, anything else is not accepted.</p></li>
<li><p><strong>List of values</strong>: You can also specify any <code class="docutils literal notranslate"><span class="pre">Iterable</span></code> (e.g. a <code class="docutils literal notranslate"><span class="pre">list</span></code>) with multiple values – the values that can be set must be one of the values in the <code class="docutils literal notranslate"><span class="pre">list</span></code> (line 8).</p></li>
<li><p><strong>Callable</strong>: You can also pass a callable object or a function (lambda) – the result of that call determines whether the value is set (line 10).</p></li>
</ul>
</section>
<section id="iter-fill">
<h4>iter_fill<a class="headerlink" href="#iter-fill" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">_None</span></code>, meaning that <code class="docutils literal notranslate"><span class="pre">iter_fill</span></code> is inactive</p></li>
<li><p><strong>Type</strong>: Any</p></li>
</ul>
<p>This option is used to get a constant number of items in the iterator while iterating over a <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>-object, see <a class="reference external" href="#iterating-over-nested-objects">here</a> for more about iteration in <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>. The example below shows what happens by default when iterating over a <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>-object where the leaf-nodes are at different depths:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Fagus</span><span class="o">.</span><span class="n">iter</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span> <span class="mi">1</span><span class="p">))</span>
<span class="linenos"> 2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="linenos"> 3</span><span class="go">[(&#39;a&#39;, &#39;b&#39;, 2), (&#39;c&#39;, 4)]</span>
<span class="linenos"> 4</span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
<span class="linenos"> 5</span><span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
<span class="linenos"> 6</span><span class="gt">Traceback (most recent call last):</span>
<span class="linenos"> 7</span><span class="c">...</span>
<span class="linenos"> 8</span><span class="gr">ValueError</span>: <span class="n">not enough values to unpack (expected 3, got 2)</span>
<span class="linenos"> 9</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Fagus</span><span class="o">.</span><span class="n">iter</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span> <span class="mi">1</span><span class="p">,</span> <span class="n">iter_fill</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>
<span class="linenos">10</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="linenos">11</span><span class="go">[(&#39;a&#39;, &#39;b&#39;, 2), (&#39;c&#39;, 4, None)]</span>
<span class="linenos">12</span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
<span class="linenos">13</span><span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
<span class="linenos">14</span><span class="go">a b 2</span>
<span class="linenos">15</span><span class="go">c 4 None</span>
</pre></div>
</div>
<p>In line 3, we see that the first tuple has three items, and the second only two. When this is run in a loop that always expects three values to unpack, it fails (line 4-8). That problem is solved in line 9 by using <code class="docutils literal notranslate"><span class="pre">iter_fill</span></code>, which fills up the shorter tuples with the value that was specified for <code class="docutils literal notranslate"><span class="pre">iter_fill</span></code>, here <code class="docutils literal notranslate"><span class="pre">None</span></code>. With that in place, the loop in line 12-15 runs through without raising an error. Note that <code class="docutils literal notranslate"><span class="pre">max_depth</span></code> has to be specified for <code class="docutils literal notranslate"><span class="pre">Fagus</span></code> to know how many items to fill up to.</p>
</section>
<section id="iter-nodes">
<h4>iter_nodes<a class="headerlink" href="#iter-nodes" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">False</span></code></p></li>
<li><p><strong>Type</strong>: <code class="docutils literal notranslate"><span class="pre">bool</span></code></p></li>
</ul>
<p>This option is used to get references to the traversed nodes while iterating on a <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>-object, see <a class="reference external" href="#iterating-over-nested-objects">here</a> for more about iteration in <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>. Below is an example of what this means:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">Fagus</span><span class="o">.</span><span class="n">iter</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span> <span class="mi">1</span><span class="p">))</span>
<span class="linenos">2</span><span class="go">[(&#39;a&#39;, &#39;b&#39;, 2), (&#39;c&#39;, 4)]</span>
<span class="linenos">3</span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">Fagus</span><span class="o">.</span><span class="n">iter</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span> <span class="n">iter_nodes</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="linenos">4</span><span class="go">[({&#39;a&#39;: {&#39;b&#39;: 2}, &#39;c&#39;: 4}, &#39;a&#39;, {&#39;b&#39;: 2}, &#39;b&#39;, 2), ({&#39;a&#39;: {&#39;b&#39;: 2}, &#39;c&#39;: 4}, &#39;c&#39;, 4)]</span>
</pre></div>
</div>
<p>As you can see, the node itself is included as the first element in both tuples. In the first tuple, we also find the subnode <code class="docutils literal notranslate"><span class="pre">{&quot;b&quot;:</span> <span class="pre">2}</span></code> as the third element. In line 2, the tuples are filled after this scheme: <code class="docutils literal notranslate"><span class="pre">key1,</span> <span class="pre">key2,</span> <span class="pre">key3,</span> <span class="pre">...,</span> <span class="pre">value</span></code>. In line 4, we additionally get the nodes, so it is <code class="docutils literal notranslate"><span class="pre">root-node,</span> <span class="pre">key1,</span> <span class="pre">node,</span> <span class="pre">key2,</span> <span class="pre">node2,</span> <span class="pre">key3,</span> <span class="pre">...,</span> <span class="pre">value</span></code>.</p>
<p>Sometimes in loops it can be helpful to actually have access to the whole node containing other relevant information. This can be especially useful combined with <a class="reference external" href="#skipping-nodes-in-iteration"><code class="docutils literal notranslate"><span class="pre">skip()</span></code></a>.</p>
</section>
<section id="list-insert">
<h4>list_insert<a class="headerlink" href="#list-insert" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">INF</span></code> (infinity, defined as <code class="docutils literal notranslate"><span class="pre">sys.maxsize</span></code>, the max value of an <code class="docutils literal notranslate"><span class="pre">int</span></code> in Python)</p></li>
<li><p><strong>Type</strong>: <code class="docutils literal notranslate"><span class="pre">int</span></code></p></li>
</ul>
<p>By default, <code class="docutils literal notranslate"><span class="pre">list</span></code>-nodes are traversed in Fagus when new items are inserted. New <code class="docutils literal notranslate"><span class="pre">list</span></code>-nodes are only created if necessary. Consider the following example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="mi">2</span><span class="p">]])</span>
<span class="linenos">2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;insert_1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="linenos">3</span><span class="go">[0, [3, 4, &#39;insert_1&#39;, 2]]</span>
</pre></div>
</div>
<p>The list <code class="docutils literal notranslate"><span class="pre">[5,</span> <span class="pre">6]</span></code> is overridden with the new value <code class="docutils literal notranslate"><span class="pre">&quot;insert_1&quot;</span></code>. In some cases it is desirable to insert a new value into one of the lists rather than just overwriting the existing value. This is where <code class="docutils literal notranslate"><span class="pre">list_insert</span></code> comes into the picture. For some background of how <code class="docutils literal notranslate"><span class="pre">list</span></code>-indices work in <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>, you can check out <a class="reference external" href="#correctly-handling-list-indices">this section</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="mi">2</span><span class="p">]],</span> <span class="n">default_node_type</span><span class="o">=</span><span class="s2">&quot;l&quot;</span><span class="p">)</span>
<span class="linenos">2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;insert_2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">list_insert</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># [5, 6] was not overridden here, insert_2 is inserted before</span>
<span class="linenos">3</span><span class="go">[0, [3, 4, &#39;insert_2&#39;, [5, 6], 2]]</span>
<span class="linenos">4</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;insert_3&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">list_insert</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># here, insert_3 is inserted at the base level 0, again without overriding</span>
<span class="linenos">5</span><span class="go">[0, [&#39;insert_3&#39;], [3, 4, &#39;insert_2&#39;, [5, 6], 2]]</span>
</pre></div>
</div>
<p>The parameter <code class="docutils literal notranslate"><span class="pre">list_insert</span></code> defines at which depth a new element should be inserted into the list. In line 2, <code class="docutils literal notranslate"><span class="pre">list_insert</span></code> is set to one, so <code class="docutils literal notranslate"><span class="pre">&quot;insert_2&quot;</span></code> is inserted in position two in the list at index 1 in the <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>-object. In line 4, the new element is inserted in the base-list at depth zero in the <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>-object. As another index is defined in <code class="docutils literal notranslate"><span class="pre">path</span></code> (2), another list is created before <code class="docutils literal notranslate"><span class="pre">&quot;insert_3</span></code> is inserted.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">({</span><span class="mi">2</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">]},</span> <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="s2">&quot;b&quot;</span><span class="p">})</span>
<span class="linenos">2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;insert_4&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">list_insert</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos">3</span><span class="go">{2: {1: 4, 3: [4, &#39;insert_4&#39;, 6]}, &#39;a&#39;: &#39;b&#39;}</span>
</pre></div>
</div>
<p>In this last example, there is no list to be traversed at depth one. In that case, the insertion of <code class="docutils literal notranslate"><span class="pre">insert_4</span></code> is performed in the first list that is traversed above the indicated <code class="docutils literal notranslate"><span class="pre">list_insert</span></code>-depth (here one), which is at depth two.</p>
</section>
<section id="node-types">
<h4>node_types<a class="headerlink" href="#node-types" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code></p></li>
<li><p><strong>Type</strong>: <code class="docutils literal notranslate"><span class="pre">str</span></code></p></li>
<li><p><strong>Allowed values</strong>: Any string only containing the characters <code class="docutils literal notranslate"><span class="pre">&quot;d&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;l&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;</span> <span class="pre">&quot;</span></code></p></li>
</ul>
<p>This parameter is used to precisely specify which types the new nodes to create when inserting a value at <a class="reference external" href="#the-path-parameter"><code class="docutils literal notranslate"><span class="pre">path</span></code></a> shall have. There are defined in three possible ways: <code class="docutils literal notranslate"><span class="pre">&quot;l&quot;</span></code> for <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;d&quot;</span></code> for <code class="docutils literal notranslate"><span class="pre">dict</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;</span> <span class="pre">&quot;</span></code> for “don’t care”. Don’t care means that if the node exists, its type will be preserved if possible, however if a new node needs to be created because it doesn’t exist, <a class="reference external" href="#default_node_type"><code class="docutils literal notranslate"><span class="pre">default_node_type</span></code></a> will be used if possible. The examples below will make it more clear how this works. For an overview, also check the <a class="reference external" href="#basic-principles-for-modifying-the-tree">basic principles for modifying the tree</a>.</p>
<p><strong>Example one: creating new nodes inside an empty object</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">()</span>
<span class="linenos">2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">()</span>  <span class="c1"># a is a dict, as default_node_type by default generates a dict</span>
<span class="linenos">3</span><span class="go">{}</span>
<span class="linenos">4</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">node_types</span><span class="o">=</span><span class="s2">&quot;dl&quot;</span><span class="p">)</span>
<span class="linenos">5</span><span class="go">{&#39;a&#39;: {0: [False]}}</span>
</pre></div>
</div>
<p>The root node, in the case above a <code class="docutils literal notranslate"><span class="pre">dict</span></code>, can’t be changed, so <code class="docutils literal notranslate"><span class="pre">node_types</span></code> only affects the nodes that resign within the root node. Therefore, <code class="docutils literal notranslate"><span class="pre">node_types</span></code> is only defined for the second until last key in <a class="reference external" href="#the-path-parameter"><code class="docutils literal notranslate"><span class="pre">path</span></code></a>. For the second key in <code class="docutils literal notranslate"><span class="pre">path</span></code>, here 0, it is defined in <code class="docutils literal notranslate"><span class="pre">node_types</span></code> that it should be a <code class="docutils literal notranslate"><span class="pre">dict</span></code>, therefore a <code class="docutils literal notranslate"><span class="pre">dict</span></code> is created. In that <code class="docutils literal notranslate"><span class="pre">dict</span></code>, a <code class="docutils literal notranslate"><span class="pre">list</span></code> is inserted at key 0 as the second letter in <code class="docutils literal notranslate"><span class="pre">node_types</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;l&quot;</span></code>, and finally <code class="docutils literal notranslate"><span class="pre">False</span></code> is inserted into that `list.</p>
<p><strong>Example two: clearly defined where to put lists and dicts at each level</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">({</span><span class="mi">3</span><span class="p">:</span> <span class="p">[[</span><span class="mi">4</span><span class="p">,</span> <span class="p">{</span><span class="mi">5</span><span class="p">:</span> <span class="s2">&quot;c&quot;</span><span class="p">}],</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="s2">&quot;q&quot;</span><span class="p">}]})</span>
<span class="linenos">2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">node_types</span><span class="o">=</span><span class="s2">&quot;ldl&quot;</span><span class="p">)</span>
<span class="linenos">3</span><span class="go">{3: [{7: [True]}, {&#39;a&#39;: &#39;q&#39;}]}</span>
</pre></div>
</div>
<p>In this case, there already are nodes at the base of the position <code class="docutils literal notranslate"><span class="pre">path</span></code> is pointing to. The first key in <code class="docutils literal notranslate"><span class="pre">path</span></code>, 3, is traversed. For the second key in <code class="docutils literal notranslate"><span class="pre">path</span></code>, here 0, it is defined in <code class="docutils literal notranslate"><span class="pre">node_types</span></code> that it should be a <code class="docutils literal notranslate"><span class="pre">list</span></code> (<code class="docutils literal notranslate"><span class="pre">&quot;l&quot;</span></code>), and in this case it actually is a list. The third key in <code class="docutils literal notranslate"><span class="pre">path</span></code> is 7, and in <code class="docutils literal notranslate"><span class="pre">node_types</span></code> it is defined that there should be a <code class="docutils literal notranslate"><span class="pre">dict</span></code> at this level. Therefore, the <code class="docutils literal notranslate"><span class="pre">list</span></code> <code class="docutils literal notranslate"><span class="pre">[4,</span> <span class="pre">{5:</span> <span class="pre">&quot;c&quot;}]</span></code> is overwritten with a new <code class="docutils literal notranslate"><span class="pre">dict</span></code> with the key 7. The forth and last element in <code class="docutils literal notranslate"><span class="pre">path</span></code> is 4, and in <code class="docutils literal notranslate"><span class="pre">node_types</span></code> it is defined that this node shall be a <code class="docutils literal notranslate"><span class="pre">list</span></code> again. The value <code class="docutils literal notranslate"><span class="pre">True</span></code> is then placed inside that <code class="docutils literal notranslate"><span class="pre">list</span></code>.</p>
<p><strong>Example three: “don’t care” and other special cases</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">(</span><span class="n">default_node_type</span><span class="o">=</span><span class="s2">&quot;l&quot;</span><span class="p">)</span>
<span class="linenos">2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;6&quot;</span><span class="p">))</span>
<span class="linenos">3</span><span class="go">[{&#39;a&#39;: [True]}]</span>
<span class="linenos">4</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="s2">&quot;ddddddddd&quot;</span><span class="p">)</span>
<span class="linenos">5</span><span class="go">[{&#39;a&#39;: [True]}, {5: None}]</span>
<span class="linenos">6</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">node_types</span><span class="o">=</span><span class="s2">&quot; d&quot;</span><span class="p">)</span>
<span class="linenos">7</span><span class="go">[{&#39;a&#39;: [True]}, {5: None, 1: {1: [False]}}]</span>
</pre></div>
</div>
<p>The first example in line two shows what happens if <code class="docutils literal notranslate"><span class="pre">node_types</span></code> is has not been defined. In that case, all the new nodes that are to be created are interpreted as “don’t care”, which means that if possible, new nodes of the type <code class="docutils literal notranslate"><span class="pre">default_node_type</span></code> are created. Here, <code class="docutils literal notranslate"><span class="pre">default_node_type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;l&quot;</span></code> (<code class="docutils literal notranslate"><span class="pre">list</span></code>). There is no meaningful easy way to create an <code class="docutils literal notranslate"><span class="pre">int</span></code>-<code class="docutils literal notranslate"><span class="pre">list</span></code>-index from <code class="docutils literal notranslate"><span class="pre">&quot;a&quot;</span></code>, therefore a <code class="docutils literal notranslate"><span class="pre">dict</span></code> is inserted at <code class="docutils literal notranslate"><span class="pre">&quot;a&quot;</span></code>. However, it is possible to create a list index from <code class="docutils literal notranslate"><span class="pre">&quot;6&quot;</span></code> by using <code class="docutils literal notranslate"><span class="pre">str()</span></code>, therefore a <code class="docutils literal notranslate"><span class="pre">list</span></code> is created at key <code class="docutils literal notranslate"><span class="pre">&quot;a&quot;</span></code>, in which <code class="docutils literal notranslate"><span class="pre">True</span></code> finally is inserted.</p>
<p>The second example in line four shows what happens if <code class="docutils literal notranslate"><span class="pre">node_types</span></code> is defined for more than the length of <code class="docutils literal notranslate"><span class="pre">path</span></code>. It’s actually no problem to do that, the remaining part of <code class="docutils literal notranslate"><span class="pre">node_types</span></code> is just ignored. The third example in line six shows what happens if <code class="docutils literal notranslate"><span class="pre">node_types</span></code> only is partly defined, in this case it is only defined to be “don’t care” for the second key in <code class="docutils literal notranslate"><span class="pre">path</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;d&quot;</span></code> for the third key in <code class="docutils literal notranslate"><span class="pre">path</span></code>, but not for the last element. For all the keys in <code class="docutils literal notranslate"><span class="pre">path</span></code> where <code class="docutils literal notranslate"><span class="pre">node_types</span></code> is undefined, it is treated as <code class="docutils literal notranslate"><span class="pre">&quot;don't</span> <span class="pre">care&quot;</span></code> when new nodes are created.</p>
</section>
<section id="path-split">
<h4>path_split<a class="headerlink" href="#path-split" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">&quot;</span> <span class="pre">&quot;</span></code></p></li>
<li><p><strong>Type</strong>: <code class="docutils literal notranslate"><span class="pre">str</span></code></p></li>
</ul>
<p>The keys needed to traverse a <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>-object for getting or setting a value are passed as a <code class="docutils literal notranslate"><span class="pre">tuple</span></code> or <code class="docutils literal notranslate"><span class="pre">list</span></code> (line 2). <code class="docutils literal notranslate"><span class="pre">path_split</span></code> allows to alternatively specify all the keys in a single string, split by <code class="docutils literal notranslate"><span class="pre">path_split</span></code> (line 4). As shown in line 4, list indices can be specified in the path-string, they are automatically converted back to <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;q&quot;</span><span class="p">]}})</span>
<span class="linenos">2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
<span class="linenos">3</span><span class="go">True</span>
<span class="linenos">4</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;a b 0&quot;</span><span class="p">]</span>
<span class="linenos">5</span><span class="go">True</span>
</pre></div>
</div>
<p>By default, <code class="docutils literal notranslate"><span class="pre">path_split</span></code> is a single space <code class="docutils literal notranslate"><span class="pre">&quot;</span> <span class="pre">&quot;</span></code>, but any other string can be used as a split character. If path string is set to <code class="docutils literal notranslate"><span class="pre">&quot;_&quot;</span></code>, the dot-notation can be used to get or set a node deeply inside a <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>-object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">(</span><span class="n">path_split</span><span class="o">=</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
<span class="linenos">2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">a_c_1</span> <span class="o">=</span> <span class="mi">4</span>  <span class="c1"># {&quot;a&quot;: {&quot;c&quot;: {&quot;1&quot;: 4}}}</span>
<span class="linenos">3</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">(</span><span class="n">path_split</span><span class="o">=</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="n">default_node_type</span><span class="o">=</span><span class="s2">&quot;l&quot;</span><span class="p">)</span>
<span class="linenos">4</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">_0_2</span> <span class="o">=</span> <span class="mi">6</span>  <span class="c1"># [[6]], note that the str after . is prefixed with a _ for a list index</span>
<span class="linenos">5</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">(</span><span class="n">path_split</span><span class="o">=</span><span class="s2">&quot;__&quot;</span><span class="p">)</span>
<span class="linenos">6</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">example_index__another_index</span> <span class="o">=</span> <span class="s2">&quot;q&quot;</span>  <span class="c1"># {&quot;example_index&quot;: {&quot;another_index&quot;: &quot;q&quot;}}</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="modifying-the-tree">
<h2>Modifying the tree<a class="headerlink" href="#modifying-the-tree" title="Permalink to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Fagus</span></code> does not only allow to easily retrieve elements deeply inside a tree of nested <code class="docutils literal notranslate"><span class="pre">dict</span></code>- and <code class="docutils literal notranslate"><span class="pre">list</span></code>-nodes using <a class="reference external" href="#the-path-parameter"><code class="docutils literal notranslate"><span class="pre">get()</span></code></a>. The tree can also be modified using the different functions shown below. Make sure to read <a class="reference external" href="#set----adding-and-overwriting-elements">set()</a> first as its basic principles apply to all the other modifying functions.</p>
<section id="basic-principles-for-modifying-the-tree">
<h3>Basic principles for modifying the tree<a class="headerlink" href="#basic-principles-for-modifying-the-tree" title="Permalink to this heading"></a></h3>
<p>The following subsections show the logic behind the creation of new nodes in <code class="docutils literal notranslate"><span class="pre">Fagus</span></code>. It is implemented in such a way that the tree is always modified as little as possible to perform the requested change.</p>
<section id="correctly-handling-list-indices">
<h4>Correctly handling list indices<a class="headerlink" href="#correctly-handling-list-indices" title="Permalink to this heading"></a></h4>
<p>As demonstrated in the examples for the <a class="reference external" href="#the-path-parameter"><code class="docutils literal notranslate"><span class="pre">path</span></code></a>-parameter, <code class="docutils literal notranslate"><span class="pre">list</span></code> indices can be positive and negative <code class="docutils literal notranslate"><span class="pre">int</span></code>-nodes to access specific values in the list:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">([[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]],</span> <span class="mi">8</span><span class="p">]])</span>  <span class="c1"># some nested lists to demonstrate indices</span>
<span class="linenos">2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;-1 2 1 1&quot;</span><span class="p">]</span>  <span class="c1"># positive and negative indices can be used to get a value</span>
<span class="linenos">3</span><span class="go">7</span>
<span class="linenos">4</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;0 -1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;two&quot;</span>  <span class="c1"># the value at index -1 is replaced with the new string</span>
<span class="linenos">5</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">()</span>
<span class="linenos">6</span><span class="go">[[[0, 1], &#39;two&#39;], [3, 4, [5, [6, 7]], 8]]</span>
</pre></div>
</div>
<p>When lists are modified, in many cases it might be desirable to append or prepend a value to the <code class="docutils literal notranslate"><span class="pre">list</span></code> instead of overriding it as shown above. This can be done as shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10000</span><span class="p">))</span>  <span class="c1"># 9 is appended as 10000 is bigger than len([3, 4, [5, [6, 7]], 8])</span>
<span class="linenos">2</span><span class="go">[[[0, 1], &#39;two&#39;], [3, 4, [5, [6, 7]], 8, 9]]</span>
<span class="linenos">3</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mf">2.5</span><span class="p">,</span> <span class="s2">&quot;1 -6&quot;</span><span class="p">)</span>  <span class="c1"># 2.5 is prepended before 3 as -6 is smaller than -len([3, 4, [5, [6, 7]], 8, 9])</span>
<span class="linenos">4</span><span class="go">[[[0, 1], &#39;two&#39;], [2.5, 3, 4, [5, [6, 7]], 8, 9]]</span>
</pre></div>
</div>
<p>This shows how elements easily can be appended and prepended just by specifying an index which is bigger than the length of the list to append, or smaller than minus the length of the list to prepend. In order to make sure that a value is always appended / prepended without knowing the length of the list, <code class="docutils literal notranslate"><span class="pre">INF</span></code> can be imported from the <code class="docutils literal notranslate"><span class="pre">fagus</span></code>-module, it is just a reference to <code class="docutils literal notranslate"><span class="pre">sys.maxsize</span></code>. The <code class="docutils literal notranslate"><span class="pre">FagusOption</span></code> <a class="reference external" href="#list_insert"><code class="docutils literal notranslate"><span class="pre">list_insert</span></code></a> can be used to insert a new value at an index in the middle of the <code class="docutils literal notranslate"><span class="pre">list</span></code>.</p>
</section>
<section id="create-the-correct-type-of-node">
<h4>Create the correct type of node<a class="headerlink" href="#create-the-correct-type-of-node" title="Permalink to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Fagus</span></code> is built around the concept of values being assigned to keys to build nested trees of <code class="docutils literal notranslate"><span class="pre">dict</span></code>- and <code class="docutils literal notranslate"><span class="pre">list</span></code>-nodes. The only supported operation in <code class="docutils literal notranslate"><span class="pre">set</span></code>-nodes is checking whether it <code class="docutils literal notranslate"><span class="pre">contains</span></code> a certain value, therefore <code class="docutils literal notranslate"><span class="pre">set</span></code>-nodes cannot be traversed by <a class="reference external" href="#the-path-parameter"><code class="docutils literal notranslate"><span class="pre">get()</span></code></a> and are thus treated as leaf-nodes. Consequently, the only available nodes to create in the tree are <code class="docutils literal notranslate"><span class="pre">dict</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;d&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">list</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;l&quot;</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">FagusOption</span></code> <a class="reference external" href="#node_types"><code class="docutils literal notranslate"><span class="pre">node_types</span></code></a> can be used to clearly specify which types the nodes at each level of the tree should have, see <a class="reference external" href="#node_types"><code class="docutils literal notranslate"><span class="pre">node_types</span></code></a> example one. If <code class="docutils literal notranslate"><span class="pre">node_types</span></code> is not specified clearly or set to <code class="docutils literal notranslate"><span class="pre">&quot;</span> <span class="pre">&quot;</span></code> (don’t care), <a class="reference external" href="#default_node_type"><code class="docutils literal notranslate"><span class="pre">default_node_type</span></code></a> determines which type of node will be created:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">()</span>
<span class="linenos"> 2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;0 0 0&quot;</span><span class="p">,</span> <span class="n">default_node_type</span><span class="o">=</span><span class="s2">&quot;l&quot;</span><span class="p">)</span>  <span class="c1"># only lists are created, as default_node_type=&quot;l&quot;</span>
<span class="linenos"> 3</span><span class="go">{&#39;0&#39;: [[True]]}</span>
<span class="linenos"> 4</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="linenos"> 5</span><span class="go">{}</span>
<span class="linenos"> 6</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;0 a 0&quot;</span><span class="p">,</span> <span class="n">default_node_type</span><span class="o">=</span><span class="s2">&quot;l&quot;</span><span class="p">)</span>  <span class="c1"># a dict is created at level 1 --&gt; can&#39;t convert &quot;a&quot; to a list-index</span>
<span class="linenos"> 7</span><span class="go">{&#39;0&#39;: {&#39;a&#39;: [True]}}</span>
<span class="linenos"> 8</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">()</span>
<span class="linenos"> 9</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;0 0 0&quot;</span><span class="p">)</span>  <span class="c1"># only create dicts, as default_node_type is &quot;d&quot; by default</span>
<span class="linenos">10</span><span class="go">{&#39;0&#39;: {&#39;0&#39;: {&#39;0&#39;: True}}}</span>
</pre></div>
</div>
<p>From the example above, we can see the following two rules on how new nodes are created:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">list</span></code> nodes are created when <code class="docutils literal notranslate"><span class="pre">default_node_type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;l&quot;</span></code> and the key can be converted to an <code class="docutils literal notranslate"><span class="pre">int</span></code> –&gt; create <code class="docutils literal notranslate"><span class="pre">list</span></code> for keys like <code class="docutils literal notranslate"><span class="pre">8</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;-10&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dict</span></code> nodes are always created when <code class="docutils literal notranslate"><span class="pre">default_node_type</span></code> is <code class="docutils literal notranslate"><span class="pre">d</span></code>, even if the key could be converted to an <code class="docutils literal notranslate"><span class="pre">int</span></code> –&gt; create <code class="docutils literal notranslate"><span class="pre">dict</span></code> also for keys like <code class="docutils literal notranslate"><span class="pre">8</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;-10&quot;</span></code></p></li>
</ol>
<p>But what happens if there already are existing nodes?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">([{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">]}])</span>
<span class="linenos">2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1"># the new value False is appended to the list</span>
<span class="linenos">3</span><span class="go">[{&#39;a&#39;: [True, False]}]</span>
<span class="linenos">4</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="s2">&quot;0 a b&quot;</span><span class="p">)</span>  <span class="c1"># could not convert &quot;b&quot; to list index, so [True, False] was replaced with {&quot;b&quot;: 7}</span>
<span class="linenos">5</span><span class="go">[{&#39;a&#39;: {&#39;b&#39;: 7}}]</span>
<span class="linenos">6</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;0 a 2&quot;</span><span class="p">,</span> <span class="n">default_node_type</span><span class="o">=</span><span class="s2">&quot;l&quot;</span><span class="p">)</span>  <span class="c1"># did not convert {&quot;b&quot;: 7} to list --&gt; if possible always try to keep node</span>
<span class="linenos">7</span><span class="go">[{&#39;a&#39;: {&#39;b&#39;: 7, &#39;2&#39;: 3}}]</span>
</pre></div>
</div>
<p>This shows that as far as possible, <code class="docutils literal notranslate"><span class="pre">Fagus</span></code> will keep the existing node and not change it like in line 6. An existing node is only overridden and changed if it is not possible to convert the provided key to a list-index.</p>
<p>It is possible to manually override this behaviour by clearly specifying if each node should be a <code class="docutils literal notranslate"><span class="pre">dict</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;d&quot;</span></code> or a <code class="docutils literal notranslate"><span class="pre">list</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;l&quot;</span></code>, check out the section about <a class="reference external" href="#node_types"><code class="docutils literal notranslate"><span class="pre">node_types</span></code></a> for examples on this.</p>
</section>
<section id="ensure-that-the-required-node-can-be-modified">
<h4>Ensure that the required node can be modified<a class="headerlink" href="#ensure-that-the-required-node-can-be-modified" title="Permalink to this heading"></a></h4>
<p>In a nested structure of <code class="docutils literal notranslate"><span class="pre">dict</span></code>- and <code class="docutils literal notranslate"><span class="pre">list</span></code>-nodes, there can also be unmodifyable <code class="docutils literal notranslate"><span class="pre">list</span></code>-nodes called <code class="docutils literal notranslate"><span class="pre">tuple</span></code>. As values can’t be changed in a <code class="docutils literal notranslate"><span class="pre">tuple</span></code>, it has to be converted into a <code class="docutils literal notranslate"><span class="pre">list</span></code>. The following example shows how this is done in case of nested <code class="docutils literal notranslate"><span class="pre">tuple</span></code>-nodes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">((((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">2</span><span class="p">),</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">)),</span> <span class="mi">8</span><span class="p">]))</span>
<span class="linenos">2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;seven&quot;</span><span class="p">,</span> <span class="s2">&quot;1 2 1 1&quot;</span><span class="p">)</span>  <span class="c1"># replacing the value 7 with the string &quot;seven&quot;</span>
<span class="linenos">3</span><span class="go">(((1, 0), 2), [3, 4, [5, [6, &#39;seven&#39;]], 8])</span>
</pre></div>
</div>
<p>In order to replace the 7 with <code class="docutils literal notranslate"><span class="pre">&quot;seven&quot;</span></code> in the <code class="docutils literal notranslate"><span class="pre">tuple</span></code> <code class="docutils literal notranslate"><span class="pre">(6,</span> <span class="pre">7)</span></code>, it has to be converted into a modifyable <code class="docutils literal notranslate"><span class="pre">list</span></code> first. <code class="docutils literal notranslate"><span class="pre">(6,</span> <span class="pre">7)</span></code> however resides in another <code class="docutils literal notranslate"><span class="pre">tuple</span></code> <code class="docutils literal notranslate"><span class="pre">(5,</span> <span class="pre">(6,</span> <span class="pre">7))</span></code>, so that outer <code class="docutils literal notranslate"><span class="pre">tuple</span></code> also has to be converted into a <code class="docutils literal notranslate"><span class="pre">list</span></code>. As <code class="docutils literal notranslate"><span class="pre">(5,</span> <span class="pre">(6,</span> <span class="pre">7))</span></code> already lies in a <code class="docutils literal notranslate"><span class="pre">list</span></code>, it can be  replaced with <code class="docutils literal notranslate"><span class="pre">[5,</span> <span class="pre">[6,</span> <span class="pre">&quot;seven&quot;]]</span></code>. The key point is that <code class="docutils literal notranslate"><span class="pre">tuple</span></code>-nodes are converted to <code class="docutils literal notranslate"><span class="pre">list</span></code>-nodes as deeply as necessary. The outermost <code class="docutils literal notranslate"><span class="pre">tuple</span></code> containing the whole tree <code class="docutils literal notranslate"><span class="pre">(((1,</span> <span class="pre">0),</span> <span class="pre">2),</span> <span class="pre">[3,</span> <span class="pre">4,</span> <span class="pre">(5,</span> <span class="pre">(6,</span> <span class="pre">7)),</span> <span class="pre">8])</span></code> is not touched, and thus remains a <code class="docutils literal notranslate"><span class="pre">tuple</span></code></p>
</section>
</section>
<section id="set-adding-and-overwriting-elements">
<h3>set() – adding and overwriting elements<a class="headerlink" href="#set-adding-and-overwriting-elements" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">set()</span></code> function can be used to add or replace a value anywhere in the tree. This function is also used internally in <code class="docutils literal notranslate"><span class="pre">Fagus</span></code> whereever new nodes need to be created. See <a class="reference external" href="#basic-principles-for-modifying-the-tree">Basic principles for modifying the tree</a> and <a class="reference external" href="#node_types"><code class="docutils literal notranslate"><span class="pre">node_types</span></code></a> for examples of how <code class="docutils literal notranslate"><span class="pre">set()</span></code> can be fine-tuned. In case no further fine-tuning is used, the <code class="docutils literal notranslate"><span class="pre">set()</span></code>-operation can also be done as shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">([],</span> <span class="n">path_split</span><span class="o">=</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
<span class="linenos">2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="s2">&quot;0_good_morning&quot;</span><span class="p">)</span>
<span class="linenos">3</span><span class="go">[{&#39;good&#39;: {&#39;morning&#39;: &#39;hello&#39;}}]</span>
<span class="linenos">4</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">_1_ciao</span> <span class="o">=</span> <span class="s2">&quot;byebye&quot;</span>  <span class="c1"># the dot-notation for set() is available when path_split is set to &quot;_&quot; or &quot;__&quot;</span>
<span class="linenos">5</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">()</span>  <span class="c1"># note that the first index 1 above was prefixed with _, as variable names can&#39;t start with a digit in Python</span>
<span class="linenos">6</span><span class="go">[{&#39;good&#39;: {&#39;morning&#39;: &#39;hello&#39;}}, {&#39;ciao&#39;: &#39;byebye&#39;}]</span>
<span class="linenos">7</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;0_good_evening&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;night&quot;</span>  <span class="c1"># the []-notation is always available for set(), a[(0, &quot;evening&quot;)] would do the same</span>
<span class="linenos">8</span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">()</span>
<span class="linenos">9</span><span class="go">[{&#39;good&#39;: {&#39;morning&#39;: &#39;hello&#39;, &#39;evening&#39;: &#39;night&#39;}}, {&#39;ciao&#39;: &#39;byebye&#39;}]</span>
</pre></div>
</div>
</section>
<section id="append-adding-a-new-element-to-a-list">
<h3>append() – adding a new element to a <code class="docutils literal notranslate"><span class="pre">list</span></code><a class="headerlink" href="#append-adding-a-new-element-to-a-list" title="Permalink to this heading"></a></h3>
<p>There might be cases where it is desirable to collect all elements of a certain type in a <code class="docutils literal notranslate"><span class="pre">list</span></code>. This can be done in only one step using <code class="docutils literal notranslate"><span class="pre">append()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">plants</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">()</span>
<span class="linenos"> 2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">plants</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;daffodil&quot;</span><span class="p">,</span> <span class="s2">&quot;flowers&quot;</span><span class="p">)</span>  <span class="c1"># a new list is created in the node flowers</span>
<span class="linenos"> 3</span><span class="go">{&#39;flowers&#39;: [&#39;daffodil&#39;]}</span>
<span class="linenos"> 4</span><span class="gp">&gt;&gt;&gt; </span><span class="n">plants</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;pine&quot;</span><span class="p">,</span> <span class="s2">&quot;trees softwood&quot;</span><span class="p">)</span>  <span class="c1"># another list is created in the category trees softwood</span>
<span class="linenos"> 5</span><span class="go">{&#39;flowers&#39;: [&#39;daffodil&#39;], &#39;trees&#39;: {&#39;softwood&#39;: [&#39;pine&#39;]}}</span>
<span class="linenos"> 6</span><span class="gp">&gt;&gt;&gt; </span><span class="n">plants</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;rose&quot;</span><span class="p">,</span> <span class="s2">&quot;flowers&quot;</span><span class="p">)</span>  <span class="c1"># rose is added to the existing flowers list</span>
<span class="linenos"> 7</span><span class="go">{&#39;flowers&#39;: [&#39;daffodil&#39;, &#39;rose&#39;], &#39;trees&#39;: {&#39;softwood&#39;: [&#39;pine&#39;]}}</span>
<span class="linenos"> 8</span><span class="gp">&gt;&gt;&gt; </span><span class="n">plants</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;oak&quot;</span><span class="p">,</span> <span class="s2">&quot;trees hardwood&quot;</span><span class="p">)</span>  <span class="c1"># a new list is created for hardwood trees</span>
<span class="linenos"> 9</span><span class="go">{&#39;flowers&#39;: [&#39;daffodil&#39;, &#39;rose&#39;], &#39;trees&#39;: {&#39;softwood&#39;: [&#39;pine&#39;], &#39;hardwood&#39;: [&#39;oak&#39;]}}</span>
<span class="linenos">10</span><span class="gp">&gt;&gt;&gt; </span><span class="n">plants</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;beech&quot;</span><span class="p">,</span> <span class="s2">&quot;trees hardwood&quot;</span><span class="p">)</span>  <span class="c1"># beech is appended to the hardwood trees list</span>
<span class="linenos">11</span><span class="go">{&#39;flowers&#39;: [&#39;daffodil&#39;, &#39;rose&#39;], &#39;trees&#39;: {&#39;softwood&#39;: [&#39;pine&#39;], &#39;hardwood&#39;: [&#39;oak&#39;, &#39;beech&#39;]}}</span>
</pre></div>
</div>
<p>As you can see, this function makes it easy to combine elements belonging to the same category in a <code class="docutils literal notranslate"><span class="pre">list</span></code> inside the tree. The pratical thing here is that it isn’t necessary to worry about creating the <code class="docutils literal notranslate"><span class="pre">list</span></code> initially – if there already is a <code class="docutils literal notranslate"><span class="pre">list</span></code>, the new element is appended and if there is no <code class="docutils literal notranslate"><span class="pre">list</span></code>, a new one is created.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">plants</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;pine&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;trees&quot;</span><span class="p">,</span> <span class="s2">&quot;softwood&quot;</span><span class="p">))</span>  <span class="c1"># removing pine from list to put it as a single element (for next step)</span>
<span class="linenos"> 2</span><span class="go">{&#39;flowers&#39;: [&#39;daffodil&#39;, &#39;rose&#39;], &#39;trees&#39;: {&#39;softwood&#39;: &#39;pine&#39;, &#39;hardwood&#39;: [&#39;oak&#39;, &#39;beech&#39;]}}</span>
<span class="linenos"> 3</span><span class="gp">&gt;&gt;&gt; </span><span class="n">plants</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;fir&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;trees&quot;</span><span class="p">,</span> <span class="s2">&quot;softwood&quot;</span><span class="p">))</span>  <span class="c1"># pine is in this position already -&gt; put pine in list, then append fir</span>
<span class="linenos"> 4</span><span class="go">{&#39;flowers&#39;: [&#39;daffodil&#39;, &#39;rose&#39;], &#39;trees&#39;: {&#39;softwood&#39;: [&#39;pine&#39;, &#39;fir&#39;], &#39;hardwood&#39;: [&#39;oak&#39;, &#39;beech&#39;]}}</span>
<span class="linenos"> 5</span><span class="gp">&gt;&gt;&gt; </span><span class="n">plants</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;forest&quot;</span><span class="p">,</span> <span class="s2">&quot;trees&quot;</span><span class="p">)</span>  <span class="c1"># node trees already present at path -&gt; convert node to list -&gt; append element</span>
<span class="linenos"> 6</span><span class="go">{&#39;flowers&#39;: [&#39;daffodil&#39;, &#39;rose&#39;], &#39;trees&#39;: [&#39;softwood&#39;, &#39;hardwood&#39;, &#39;forest&#39;]}</span>
<span class="linenos"> 7</span><span class="gp">&gt;&gt;&gt; </span><span class="n">plants</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">({</span><span class="s2">&quot;flowers&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;rose&quot;</span><span class="p">,</span> <span class="s2">&quot;daffodil&quot;</span><span class="p">,</span> <span class="s2">&quot;tulip&quot;</span><span class="p">}})</span>  <span class="c1"># preparing the next step - flowers are now in a set</span>
<span class="linenos"> 8</span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># below another type of node is already at path (here a set) -&gt; convert it to a list and then append the element</span>
<span class="linenos"> 9</span><span class="gp">&gt;&gt;&gt; </span><span class="n">plants</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;sunflower&quot;</span><span class="p">,</span> <span class="s2">&quot;flowers&quot;</span><span class="p">)[</span><span class="s2">&quot;flowers&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>  <span class="c1"># sort list of flowers for doctest, irrelevant for example</span>
<span class="linenos">10</span><span class="gp">&gt;&gt;&gt; </span><span class="n">plants</span><span class="p">()</span>  <span class="c1"># as you can see, {&quot;rose&quot;, &quot;daffodil&quot;, &quot;tulip&quot;} was converted to a list, then sunflower was added</span>
<span class="linenos">11</span><span class="go">{&#39;flowers&#39;: [&#39;daffodil&#39;, &#39;rose&#39;, &#39;sunflower&#39;, &#39;tulip&#39;]}</span>
</pre></div>
</div>
<p>The examples above show that <code class="docutils literal notranslate"><span class="pre">append()</span></code> is agile and makes the best out of any situation in the tree where it is called. If there is a single element already present at the node, that element is put in a <code class="docutils literal notranslate"><span class="pre">list</span></code> before the new element is added. If there already is another type of node or another <code class="docutils literal notranslate"><span class="pre">Collection</span></code> at the requested <code class="docutils literal notranslate"><span class="pre">path</span></code>, convert that node into a <code class="docutils literal notranslate"><span class="pre">list</span></code> and then append the new element.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">plants</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;lily&quot;</span><span class="p">,</span> <span class="s2">&quot;flowers 4&quot;</span><span class="p">)</span>  <span class="c1"># set() with an index bigger than the length of the list can also be used to append</span>
<span class="linenos">2</span><span class="go">{&#39;flowers&#39;: [&#39;daffodil&#39;, &#39;rose&#39;, &#39;sunflower&#39;, &#39;tulip&#39;, &#39;lily&#39;]}</span>
</pre></div>
</div>
<p>The example above shows that <code class="docutils literal notranslate"><span class="pre">set()</span></code> can also be used to append an element to a <code class="docutils literal notranslate"><span class="pre">list</span></code>. However, note that <code class="docutils literal notranslate"><span class="pre">set()</span></code> in this case won’t create a new list if the node doesn’t exist yet. It won’t convert another node already present at <code class="docutils literal notranslate"><span class="pre">path</span></code> into a <code class="docutils literal notranslate"><span class="pre">list</span></code> neither.</p>
</section>
<section id="extend-extending-a-list-with-multiple-elements">
<h3>extend() – extending a <code class="docutils literal notranslate"><span class="pre">list</span></code> with multiple elements<a class="headerlink" href="#extend-extending-a-list-with-multiple-elements" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">extend()</span></code> function works very similar to <a class="reference external" href="#append----adding-a-new-element-to-a-list"><code class="docutils literal notranslate"><span class="pre">append()</span></code></a>, the main difference here is that instead of appending one additional element, the list is extended with a collection of elements.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">plants</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="s2">&quot;lavender&quot;</span><span class="p">,</span> <span class="s2">&quot;daisy&quot;</span><span class="p">,</span> <span class="s2">&quot;orchid&quot;</span><span class="p">),</span> <span class="s2">&quot;flowers&quot;</span><span class="p">)</span>  <span class="c1"># extend() works like append(), just adding more elements</span>
<span class="linenos">2</span><span class="go">{&#39;flowers&#39;: [&#39;daffodil&#39;, &#39;rose&#39;, &#39;sunflower&#39;, &#39;tulip&#39;, &#39;lily&#39;, &#39;lavender&#39;, &#39;daisy&#39;, &#39;orchid&#39;]}</span>
</pre></div>
</div>
<p>For further reading about when and how new <code class="docutils literal notranslate"><span class="pre">list</span></code>-nodes are created, refer to the documentation of <a class="reference external" href="#append----adding-a-new-element-to-a-list"><code class="docutils literal notranslate"><span class="pre">append()</span></code></a> as <code class="docutils literal notranslate"><span class="pre">extend()</span></code> works similar except from the fact that several new elements are added instead of one.</p>
</section>
<section id="insert-insert-an-element-at-a-given-index-in-a-list">
<h3>insert() – insert an element at a given index in a <code class="docutils literal notranslate"><span class="pre">list</span></code><a class="headerlink" href="#insert-insert-an-element-at-a-given-index-in-a-list" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">insert()</span></code> function works similar to <a class="reference external" href="#append----adding-a-new-element-to-a-list"><code class="docutils literal notranslate"><span class="pre">append()</span></code></a>, the main difference is just that instead of appending the new element to the end of the <code class="docutils literal notranslate"><span class="pre">list</span></code>, it can be inserted at any position. For an overview of how and when new <code class="docutils literal notranslate"><span class="pre">list</span></code>-nodes are created before insertion, check out <a class="reference external" href="#append----adding-a-new-element-to-a-list"><code class="docutils literal notranslate"><span class="pre">append()</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">plants</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">({</span><span class="s1">&#39;flowers&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;daffodil&#39;</span><span class="p">,</span> <span class="s1">&#39;rose&#39;</span><span class="p">,</span> <span class="s1">&#39;sunflower&#39;</span><span class="p">]})</span>
<span class="linenos">2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">plants</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;tulip&quot;</span><span class="p">,</span> <span class="s2">&quot;flowers&quot;</span><span class="p">)</span>  <span class="c1"># index parameter comes first, so the order if args is like in list().insert()</span>
<span class="linenos">3</span><span class="go">{&#39;flowers&#39;: [&#39;daffodil&#39;, &#39;tulip&#39;, &#39;rose&#39;, &#39;sunflower&#39;]}</span>
</pre></div>
</div>
<p>The normal indexation of <code class="docutils literal notranslate"><span class="pre">list</span></code>-nodes in <code class="docutils literal notranslate"><span class="pre">Fagus</span></code> only allows appending or prepending elements if it is necessary to do so anywhere in <a class="reference external" href="#the-path-parameter"><code class="docutils literal notranslate"><span class="pre">path</span></code></a>, this is documented <a class="reference external" href="#correctly-handling-list-indices"><code class="docutils literal notranslate"><span class="pre">here</span></code></a>. Check out the <a class="reference external" href="#list_insert"><code class="docutils literal notranslate"><span class="pre">list_insert</span></code></a> <code class="docutils literal notranslate"><span class="pre">FagusOption</span></code> for examples on how to insert new nodes at any index in the list anywhere in <code class="docutils literal notranslate"><span class="pre">path</span></code>.</p>
</section>
<section id="add-adding-a-new-element-to-a-set">
<h3>add() – adding a new element to a <code class="docutils literal notranslate"><span class="pre">set</span></code><a class="headerlink" href="#add-adding-a-new-element-to-a-set" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">add()</span></code> function works similar to <a class="reference external" href="#append----adding-a-new-element-to-a-list"><code class="docutils literal notranslate"><span class="pre">append()</span></code></a>, the main difference is just that instead of creating and appending to <code class="docutils literal notranslate"><span class="pre">list</span></code>-nodes, <code class="docutils literal notranslate"><span class="pre">set</span></code>-nodes are used. For detailed examples of the rules when and how new <code class="docutils literal notranslate"><span class="pre">set</span></code>-nodes are created by this function, check out <a class="reference external" href="#append----adding-a-new-element-to-a-list"><code class="docutils literal notranslate"><span class="pre">append()</span></code></a> just replacing occurrences of <code class="docutils literal notranslate"><span class="pre">list</span></code> with <code class="docutils literal notranslate"><span class="pre">set</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tests.test_fagus</span> <span class="kn">import</span> <span class="n">sorted_set</span>  <span class="c1"># function needed for doctests to work with sets -&gt; print the set sorted</span>
<span class="linenos">2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">sorted_set</span><span class="p">(</span><span class="n">plants</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;daisy&quot;</span><span class="p">,</span> <span class="s2">&quot;flowers&quot;</span><span class="p">))</span>  <span class="c1"># list is converted into a set, and then &quot;daisy&quot; is added to that set</span>
<span class="linenos">3</span><span class="go">{&#39;flowers&#39;: {&#39;daffodil&#39;, &#39;daisy&#39;, &#39;rose&#39;, &#39;sunflower&#39;, &#39;tulip&#39;}}</span>
<span class="linenos">4</span><span class="gp">&gt;&gt;&gt; </span><span class="n">sorted_set</span><span class="p">(</span><span class="n">plants</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;oak&quot;</span><span class="p">,</span> <span class="s2">&quot;trees&quot;</span><span class="p">))</span>  <span class="c1"># node does not exist yet - create new empty set and add the new value to it</span>
<span class="linenos">5</span><span class="go">{&#39;flowers&#39;: {&#39;daffodil&#39;, &#39;daisy&#39;, &#39;rose&#39;, &#39;sunflower&#39;, &#39;tulip&#39;}, &#39;trees&#39;: {&#39;oak&#39;}}</span>
</pre></div>
</div>
</section>
<section id="update-update-multiple-elements-in-a-set-or-dict">
<h3>update() – update multiple elements in a <code class="docutils literal notranslate"><span class="pre">set</span></code> or <code class="docutils literal notranslate"><span class="pre">dict</span></code><a class="headerlink" href="#update-update-multiple-elements-in-a-set-or-dict" title="Permalink to this heading"></a></h3>
<p>This function works similar to <a class="reference external" href="#extend----extending-a-list-with-multiple-elements"><code class="docutils literal notranslate"><span class="pre">extend()</span></code></a> explained above, however the difference here is that the new elements now are added to a <code class="docutils literal notranslate"><span class="pre">set</span></code> or <code class="docutils literal notranslate"><span class="pre">dict</span></code>. As the function has the same name for <code class="docutils literal notranslate"><span class="pre">set</span></code> and <code class="docutils literal notranslate"><span class="pre">dict</span></code>-nodes, it has to determine what kind of node to create. Consider the following examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">plants</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">()</span>  <span class="c1"># sorted_set() is used to always print sets deterministic, this is needed internally for doctests</span>
<span class="linenos"> 2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">sorted_set</span><span class="p">(</span><span class="n">plants</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">softwood</span><span class="o">=</span><span class="s2">&quot;pine&quot;</span><span class="p">,</span> <span class="n">hardwood</span><span class="o">=</span><span class="s2">&quot;oak&quot;</span><span class="p">),</span> <span class="s2">&quot;trees&quot;</span><span class="p">))</span>  <span class="c1"># creating and updating dict</span>
<span class="linenos"> 3</span><span class="go">{&#39;trees&#39;: {&#39;softwood&#39;: &#39;pine&#39;, &#39;hardwood&#39;: &#39;oak&#39;}}</span>
<span class="linenos"> 4</span><span class="gp">&gt;&gt;&gt; </span><span class="n">sorted_set</span><span class="p">(</span><span class="n">plants</span><span class="o">.</span><span class="n">update</span><span class="p">((</span><span class="s2">&quot;tulip&quot;</span><span class="p">,</span> <span class="s2">&quot;daisy&quot;</span><span class="p">,</span> <span class="s2">&quot;daffodil&quot;</span><span class="p">),</span> <span class="s2">&quot;flowers&quot;</span><span class="p">))</span>  <span class="c1"># create set from tuple</span>
<span class="linenos"> 5</span><span class="go">{&#39;trees&#39;: {&#39;softwood&#39;: &#39;pine&#39;, &#39;hardwood&#39;: &#39;oak&#39;}, &#39;flowers&#39;: {&#39;daffodil&#39;, &#39;daisy&#39;, &#39;tulip&#39;}}</span>
<span class="linenos"> 6</span><span class="gp">&gt;&gt;&gt; </span><span class="n">plants</span><span class="o">.</span><span class="n">clear</span><span class="p">(</span><span class="s2">&quot;flowers&quot;</span><span class="p">)</span>  <span class="c1"># emptying this set to keep the example easily readable</span>
<span class="linenos"> 7</span><span class="go">{&#39;trees&#39;: {&#39;softwood&#39;: &#39;pine&#39;, &#39;hardwood&#39;: &#39;oak&#39;}, &#39;flowers&#39;: set()}</span>
<span class="linenos"> 8</span><span class="gp">&gt;&gt;&gt; </span><span class="n">sorted_set</span><span class="p">(</span><span class="n">plants</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;garden flowers&quot;</span><span class="p">:</span> <span class="s2">&quot;sunflower&quot;</span><span class="p">,</span> <span class="s2">&quot;flower trees&quot;</span><span class="p">:</span> <span class="s2">&quot;apple tree&quot;</span><span class="p">},</span> <span class="s2">&quot;flowers&quot;</span><span class="p">))</span>  <span class="c1"># comment below</span>
<span class="linenos"> 9</span><span class="go">{&#39;trees&#39;: {&#39;softwood&#39;: &#39;pine&#39;, &#39;hardwood&#39;: &#39;oak&#39;}, &#39;flowers&#39;: {&#39;flower trees&#39;, &#39;garden flowers&#39;}}</span>
<span class="linenos">10</span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># as you can see, even though a dict was sent in as a parameter, the flowers node stayed a set, so only &quot;flower</span>
<span class="linenos">11</span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># trees&quot; and &quot;garden flowers&quot; were added, but not &quot;apple tree&quot; and &quot;sunflower&quot;</span>
</pre></div>
</div>
<p>The examples above illustrate first two of the principles <code class="docutils literal notranslate"><span class="pre">update()</span></code> operates after:</p>
<ol class="arabic simple">
<li><p>If there already is a <code class="docutils literal notranslate"><span class="pre">dict</span></code>- or <code class="docutils literal notranslate"><span class="pre">set</span></code> object at <a class="reference external" href="#the-path-parameter"><code class="docutils literal notranslate"><span class="pre">path</span></code></a>, keep that node if possible.</p></li>
<li><p>If there already exists a <code class="docutils literal notranslate"><span class="pre">set</span></code>, and a <code class="docutils literal notranslate"><span class="pre">dict</span></code> is passed to <code class="docutils literal notranslate"><span class="pre">update()</span></code>, the <code class="docutils literal notranslate"><span class="pre">set</span></code> is updated with the keys from the dict only (line 8).</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="gp">&gt;&gt;&gt; </span><span class="n">sorted_set</span><span class="p">(</span><span class="n">plants</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s2">&quot;fruit trees&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;apple tree&quot;</span><span class="p">,</span> <span class="s2">&quot;lemon tree&quot;</span><span class="p">]},</span> <span class="s2">&quot;trees&quot;</span><span class="p">))</span>  <span class="c1"># prepare the next example</span>
<span class="linenos"> 2</span><span class="go">{&#39;trees&#39;: {&#39;fruit trees&#39;: [&#39;apple tree&#39;, &#39;lemon tree&#39;]}, &#39;flowers&#39;: {&#39;flower trees&#39;, &#39;garden flowers&#39;}}</span>
<span class="linenos"> 3</span><span class="gp">&gt;&gt;&gt; </span><span class="n">sorted_set</span><span class="p">(</span><span class="n">plants</span><span class="o">.</span><span class="n">update</span><span class="p">(((</span><span class="s2">&quot;hardwood&quot;</span><span class="p">,</span> <span class="s2">&quot;oak&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;softwood&quot;</span><span class="p">,</span> <span class="s2">&quot;fir&quot;</span><span class="p">)),</span> <span class="s2">&quot;trees&quot;</span><span class="p">))</span>  <span class="c1"># comment below</span>
<span class="linenos"> 4</span><span class="go">{&#39;trees&#39;: {(&#39;hardwood&#39;, &#39;oak&#39;), (&#39;softwood&#39;, &#39;fir&#39;)}, &#39;flowers&#39;: {&#39;flower trees&#39;, &#39;garden flowers&#39;}}</span>
<span class="linenos"> 5</span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># it is not possible to update a dict from these tuples -&gt; replace the previous dict with a new set with the tuples</span>
<span class="linenos"> 6</span><span class="gp">&gt;&gt;&gt; </span><span class="n">plants</span> <span class="o">=</span> <span class="n">Fagus</span><span class="p">({</span><span class="s2">&quot;trees&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;hardwood&quot;</span><span class="p">:</span> <span class="s2">&quot;beech&quot;</span><span class="p">,</span> <span class="s2">&quot;softwood&quot;</span><span class="p">:</span> <span class="s2">&quot;fir&quot;</span><span class="p">}})</span>  <span class="c1"># making &quot;trees&quot; a dict again for next example</span>
<span class="linenos"> 7</span><span class="gp">&gt;&gt;&gt; </span><span class="n">sorted_set</span><span class="p">(</span><span class="n">plants</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">dict</span><span class="p">(((</span><span class="s2">&quot;hardwood&quot;</span><span class="p">,</span> <span class="s2">&quot;oak&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;softwood&quot;</span><span class="p">,</span> <span class="s2">&quot;pine&quot;</span><span class="p">))),</span> <span class="s2">&quot;trees&quot;</span><span class="p">))</span>  <span class="c1"># comment below</span>
<span class="linenos"> 8</span><span class="go">{&#39;trees&#39;: {&#39;hardwood&#39;: &#39;oak&#39;, &#39;softwood&#39;: &#39;pine&#39;}}</span>
<span class="linenos"> 9</span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Here it is shown how a dict can be updated based on a list of tuples with two elements, or e.g. the iterator</span>
<span class="linenos">10</span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># dict.items() returns. By passing the list of tuples to the dict() function first, Fagus detects your intention</span>
<span class="linenos">11</span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># to update a dict instead of overwriting it with a set</span>
</pre></div>
</div>
<p>The third principle <code class="docutils literal notranslate"><span class="pre">update()</span></code> operates after is the following:
3. If you would like to update a <code class="docutils literal notranslate"><span class="pre">dict</span></code>, you must pass a <code class="docutils literal notranslate"><span class="pre">Mapping</span></code> (the type of key-value containers like <code class="docutils literal notranslate"><span class="pre">dict</span></code>). If you just pass e.g. a <code class="docutils literal notranslate"><span class="pre">tuple</span></code> of <code class="docutils literal notranslate"><span class="pre">tuple</span></code>-nodes with two elements or <code class="docutils literal notranslate"><span class="pre">dict.items()</span></code>, the <code class="docutils literal notranslate"><span class="pre">dict</span></code> will be overwritten with a <code class="docutils literal notranslate"><span class="pre">set</span></code>. To update the dict, just pass e.g. the <code class="docutils literal notranslate"><span class="pre">tuple</span></code> of <code class="docutils literal notranslate"><span class="pre">tuple</span></code>-nodes through <code class="docutils literal notranslate"><span class="pre">dict()</span></code> before passing it to <code class="docutils literal notranslate"><span class="pre">update()</span></code>. For any <code class="docutils literal notranslate"><span class="pre">Iterable</span></code> that is not a <code class="docutils literal notranslate"><span class="pre">Mapping</span></code>, the <code class="docutils literal notranslate"><span class="pre">Mapping</span></code> will be removed and a <code class="docutils literal notranslate"><span class="pre">set</span></code> will be created.</p>
<p>Especially this last principle may seem tedious, however it was chosen to implement it that way to prevent ambiguity, and the main reason for that is the <code class="docutils literal notranslate"><span class="pre">update()</span></code> function being used in <code class="docutils literal notranslate"><span class="pre">set</span></code>-nodes as well as <code class="docutils literal notranslate"><span class="pre">dict</span></code>-nodes.</p>
</section>
<section id="remove-delete-and-pop">
<h3>remove(), delete() and pop()<a class="headerlink" href="#remove-delete-and-pop" title="Permalink to this heading"></a></h3>
</section>
<section id="serialize-ensure-that-a-tree-is-json-or-yaml-serializable">
<h3>serialize() – ensure that a tree is json- or yaml-serializable<a class="headerlink" href="#serialize-ensure-that-a-tree-is-json-or-yaml-serializable" title="Permalink to this heading"></a></h3>
</section>
<section id="mod-modifying-elements">
<h3>mod() – modifying elements<a class="headerlink" href="#mod-modifying-elements" title="Permalink to this heading"></a></h3>
</section>
</section>
<section id="iterating-over-nested-objects">
<h2>Iterating over nested objects<a class="headerlink" href="#iterating-over-nested-objects" title="Permalink to this heading"></a></h2>
<section id="skipping-nodes-in-iteration">
<h3>Skipping nodes in iteration.<a class="headerlink" href="#skipping-nodes-in-iteration" title="Permalink to this heading"></a></h3>
</section>
</section>
<section id="filtering-nested-objects">
<h2>Filtering nested objects<a class="headerlink" href="#filtering-nested-objects" title="Permalink to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="LICENSE.html" class="btn btn-neutral float-left" title="ISC License" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="fagus.html" class="btn btn-neutral float-right" title="fagus package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Lukas Neuenschwander.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

</body>
</html>
